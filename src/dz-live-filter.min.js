!function i(a,l,f){function s(r,t){if(!l[r]){if(!a[r]){var o="function"==typeof require&&require;if(!t&&o)return o(r,!0);if(c)return c(r,!0);var e=new Error("Cannot find module '"+r+"'");throw e.code="MODULE_NOT_FOUND",e}var n=l[r]={exports:{}};a[r][0].call(n.exports,function(t){return s(a[r][1][t]||t)},n,n.exports,i,a,l,f)}return l[r].exports}for(var c="function"==typeof require&&require,t=0;t<f.length;t++)s(f[t]);return s}({1:[function(t,r,o){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;n=function(t){var r={rootTag:".js-shedule",itemTag:".js-shedule-item",categoryTag:".js-shedule-category",controlFormTag:".js-control-form",controlTag:".js-control",delay:0,animationCallback:function(t,r){t.style.display="none",r&&(t.style.display="")}};!function(){var m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r,t=document.querySelectorAll(m.rootTag);t=Array.from(t);var d=m.animationCallback||function(t,r){t.style.display=r?"":"none"},v=m.delay||0;function p(t,r){if([].indexOf)return t.indexOf(r);for(var o=0;o<t.length;o++)if(t[o]===r)return o;return-1}function g(t){if(console.timeEnd("all"),m.categoryTag){var r=m.categoryTag,e=m.itemTag,o=t.querySelectorAll(r);(o=Array.from(o)).forEach(function(t){var r=t.querySelectorAll(e);if(0<(r=Array.from(r)).length){var o=!1;r.forEach(function(t){"none"!=t.style.display&&(o=!0)}),t.style.display=o?"":"none"}})}}t.forEach(function(t){!function(o,t){var e=o.querySelector(t.controlFormTag),r=o.querySelectorAll(t.itemTag);r=Array.from(r);var n=o.querySelectorAll(t.controlTag);n=Array.from(n);var i=[];r.forEach(function(t){!function(t,r){if(r.dataset.filter){var o=r.dataset.filter;o=JSON.parse(o);var e=[r,o];t.push(e)}else console.error(r,"filtering data not found")}(i,t)}),n.forEach(function(t){t.onchange=function(t){console.time("all"),o.classList.remove("filter-was-sorted"),o.classList.add("is-filter-sorting");var r=function(t){var r=new FormData(t),o={};void 0===window.FormData&&console.error("The formData object is not supported by your brooser. You need to use the polyfil https://www.npmjs.com/package/formdata-polyfill");var e=!0,n=!1,i=void 0;try{for(var a,l=r.entries()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var f=a.value,s=f[0],c=f[1];o[s]||(o[s]=[]),o[s].push(c)}}catch(t){n=!0,i=t}finally{try{e||null==l.return||l.return()}finally{if(n)throw i}}return o}(e);"{}"==JSON.stringify(r)?(i.forEach(function(t){d(t[0],!0)}),g(o),o.classList.remove("is-filter-sorting"),o.classList.add("filter-was-sorted"),console.log("открыты все "+i.length+" элементов")):(i.forEach(function(t){d(t[0],!1)}),function(f,s,c){var u=v,y=0;f.forEach(function(t,r){var o=t[0],e=t[1],n=function(t,r,o){return~p(t,!1)?(o(r,!1),this.result=!1):(o(r,!0),this.result=!0)}.bind(t);function i(){t.result&&(y+=1),r==f.length-1&&(function(t,r){t?r.classList.remove("is-empty-open-item"):r.classList.add("is-empty-open-item"),r.classList.remove("is-filter-sorting"),r.classList.add("filter-was-sorted"),g(r)}(y,c),m.afterFiltrationCallback&&m.afterFiltrationCallback())}t.result=!1;var a={listitem:t,formDataObj:s,itemData:e,setFinalResult:n,itemNode:o,animationCallback:d};function l(){var t=new Promise(function(t,r){!function(t,e){t.listitem;var r=t.formDataObj,i=t.itemData,n=t.setFinalResult,a=t.itemNode,l=t.animationCallback,f=[],s=Object.keys(r).length;function c(t,r,o){if(t+1===r&&(f.push(o),!s))return e("result"),n(f,a,l)}for(var u in r){if(s-=1,!i[u]){console.error("свойство "+u+" не найдено в строке");break}if(!Array.isArray(i[u])){console.error("property "+u+" not an array");break}!function(){var o=i[u],t=r[u],e=!1,n=t.length;t.forEach(function(t,r){o.includes(t)?c(r,n,e=!0):c(r,n,e)})}()}}(a,t)});t.then(function(t){i()})}v?(setTimeout(l,u),u+=v):l()})}(i,r,o))}})}(t,m)})}(t)},"function"==typeof define&&define.amd?(define(n),console.log("amd")):"object"===(void 0===o?"undefined":e(o))?(r.exports=n,console.log("CommomJS")):(void 0).dzLiveFilter=n},{}]},{},[1]);
//# sourceMappingURL=dz-live-filter.min.js.map
